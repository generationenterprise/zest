<div class="container page">
    <div layout="row" layout-sm="column" layout-align="center" layout-margin layout-fill layout-padding>
        <div layout="column" layout-align="top">
            <div>
                <h2>Date and Time</h2></div>
            <div class="schedule-estimate-container md-card-shadow" layout="column">
                <div ng-if="!loading">
                    <span class="pull-left">{{booking.hours}} hour cleaning (₦{{frequencySelected.rate}}/hour)</span>
                    <span class="pull-right">₦{{(booking.hours*frequencySelected.rate).toFixed(1)}}</span>
                </div>
                <div ng-repeat="extra in booking.Cleaning.Extras" ng-if="!loading">
                    <span class="pull-left">+{{extra.description}} <span ng-if="extra.variable">(₦{{extra.rate}}/bedroom)</span></span>
                    <span class="pull-right" ng-if="!extra.variable">₦{{extra.rate.toFixed(1)}}</span>
                    <span class="pull-right" ng-if="extra.variable">₦{{(extra.rate*booking.Cleaning.bedrooms).toFixed(1)}}</span>
                </div>
                <div ng-if="!loading && selectedZone.rate > 0">
                    <span class="pull-left">+{{customer.neighborhood}} transport</span>
                    <span class="pull-right">₦{{selectedZone.rate.toFixed(1)}}</span>
                </div>
                <div ng-if="!loading" style="font-weight:bold">
                    <span class="pull-left">TOTAL</span>
                    <span class="pull-right">₦{{booking.total().toFixed(1)}}</span>
                </div>
            </div>
        </div>
        <div layout="column" layout-align="space-around center" layout-margin layout-fill layout-padding class="schedule-form-container md-card-shadow" ng-if="loading">
            <span class="fa fa-spinner fa-spin"></span>
        </div>
        <div layout="column" layout-align="space-around center" layout-margin layout-fill layout-padding class="schedule-form-container md-card-shadow" ng-if="!loading">
            <div class="form-item full-width">
                <div class="btn-group" tyle="width:100%">
                    <label class="btn btn-primary" ng-model="frequency" btn-radio="1" style="width:20%" ng-change="setFrequency('once')">Once</label>
                    <label class="btn btn-primary" ng-model="frequency" btn-radio="2" style="width:25%" ng-change="setFrequency('weekly')">Weekly</label>
                    <label class="btn btn-primary" ng-model="frequency" btn-radio="3" style="width:30%" ng-change="setFrequency('bi-weekly')">Bi-Weekly</label>
                    <label class="btn btn-primary" ng-model="frequency" btn-radio="4" style="width:25%" ng-change="setFrequency('monthly')">Monthly</label>
                </div>
            </div>
            <datetimepicker data-datetimepicker-config="dateTimeConfig"
                            data-ng-model="dateTime" 
                            data-before-render="beforeRender($view, $dates, $leftDate, $upDate, $rightDate)"
                            data-on-set-time="onSetTime(newDate, oldDate)"></datetimepicker>
            <div class="form-item full-width">
                <div class="form-group">
                    <b>{{describeFrequency()}}</b>
                    <br><br>
                    <input type="text" class="form-control" ng-model="customer.address" placeholder="Street Address">
                    <br>
                    <!--input type="text" class="form-control" ng-model="customer.city" placeholder="City">
                    <br-->
                    <input type="text" class="form-control display-inline pull-left width-48" ng-model="customer.city" placeholder="City">
                    <!--input type="text" class="form-control display-inline pull-right width-48" ng-model="customer.neighborhood" placeholder="Neighborhood"-->
                    <select class="form-control display-inline pull-right width-48"
                            ng-change="setNeighborhood()"
                            ng-model="customer.neighborhood">
                        <option value="" disabled selected>Select Neighborhood</option>
                        <option ng-repeat="neighborhood in neighborhoods">{{neighborhood}}</option>
                    </select>
                </div>
            </div>
            <br>
            <button type="button" class="btn btn-success submit" disabled ng-if="submitting">
                <span class="fa fa-spinner fa-spin"></span> Scheduling...
            </button>
            <button type="button" class="btn btn-success submit" ng-click="continue()" ng-disabled="validator.disable()" ng-if="!submitting">
                <span ng-if="!validator.disable()">Confirm</span>
                <span ng-if="validator.disable()">{{validator.message()}}</span>
            </button>
        </div>
    </div>
</div>
