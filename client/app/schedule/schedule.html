<div class="container page">
    <div layout="row" layout-sm="column" layout-align="center" layout-margin layout-fill layout-padding>
        <div layout="column" layout-align="top">
            <div>
                <h2>Date and Time</h2></div>
            <div class="schedule-estimate-container" layout="column">
                <div ng-if="!loading">
                    <span class="pull-left">{{booking.hours}} hour booking (N{{booking.frequency.rate}}/hour)</span>
                    <span class="pull-right">N{{(booking.hours*booking.frequency.rate).toFixed(1)}}</span>
                </div>
                <div ng-repeat="extra in booking.Cleaning.Extras" ng-if="!loading">
                    <span class="pull-left">+{{extra.description}}</span>
                    <span class="pull-right">N{{extra.rate.toFixed(1)}}</span>
                </div>
                <div ng-if="!loading">
                    <span class="pull-left">TOTAL</span>
                    <span class="pull-right">N{{booking.total().toFixed(1)}}</span>
                </div>
            </div>
        </div>
        <div layout="column" layout-align="space-around center" layout-margin layout-fill layout-padding class="schedule-form-container" ng-if="loading">
            <span class="fa fa-spinner fa-spin"></span>
        </div>
        <div layout="column" layout-align="space-around center" layout-margin layout-fill layout-padding class="schedule-form-container" ng-if="!loading">
            <div class="form-item full-width">
            <select ng-model="booking.frequency" ng-options="frequency as frequency.label for frequency in frequencies track by frequency.id"></select>
            </div>
            <div class="form-item full-width">
                <select class="width-48 pull-left" ng-model="booking.date">
                    <option>Date</option>
                    <option ng-repeat="date in dates">
                        {{date | date:'EEE M/d'}}
                    </option>
                </select>
                <select class="width-48 pull-right" ng-model="booking.time">
                    <option>Time</option>
                    <option ng-repeat="time in times">
                        {{time | date:'HH:mm'}}
                    </option>
                </select>
            </div>
            {{booking.date}}
            {{booking.time}}
            <div class="form-item full-width">
                <div class="form-group">
                    <input type="text" class="form-control" ng-model="customer.address" placeholder="Street Address">
                    <br>
                    <input type="text" class="form-control" ng-model="customer.city" placeholder="City">
                    <br>
                    <input type="text" class="form-control display-inline pull-left width-48" ng-model="customer.state" placeholder="State">
                    <input type="text" class="form-control display-inline pull-right width-48" ng-model="customer.postcode" placeholder="Code">
                </div>
            </div>
            <br>
            <button type="button" class="btn btn-primary submit" disabled ng-if="submitting">
                <span class="fa fa-spinner fa-spin"></span> Scheduling...
            </button>
            <button type="button" class="btn btn-primary submit" ng-click="continue()" ng-disabled="validator.disable()" ng-if="!submitting">
                <span ng-if="!validator.disable()">Confirm</span>
                <span ng-if="validator.disable()">{{validator.message()}}</span>
            </button>
        </div>
    </div>
</div>
